'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const dbConfig = require('./../config/database.json');
const Sequelize = require("sequelize");
/**
 * Build the mysql connection string from the config data for the current env
 *
 * @return {String}
 */
function buildConnectionString(env = 'development') {
    const connectionData = dbConfig[env];
    const user = connectionData.username;
    const pass = connectionData.password ?
        ':' + connectionData.password
        : '';
    const host = connectionData.host;
    const db = connectionData.database;
    return `mysql://${user}${pass}@${host}/${db}`;
}
/**
 * Intializes the Sequelize instance
 *
 * @return {Sequelize}
 */
function initSequelize() {
    const shouldLogQueries = dbConfig[process.env.NODE_ENV].logging;
    return new Sequelize(buildConnectionString(process.env.NODE_ENV), {
        logging: shouldLogQueries
    });
}
exports.default = initSequelize;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiL2luaXQtc2VxdWVsaXplLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7QUFFYixNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN0RCx1Q0FBdUM7QUFFdkM7Ozs7R0FJRztBQUNILCtCQUErQixNQUFjLGFBQWE7SUFDeEQsTUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3JDLE1BQU0sSUFBSSxHQUFHLGNBQWMsQ0FBQyxRQUFRLENBQUM7SUFDckMsTUFBTSxJQUFJLEdBQUcsY0FBYyxDQUFDLFFBQVE7UUFDbEMsR0FBRyxHQUFHLGNBQWMsQ0FBQyxRQUFRO1VBQzNCLEVBQUUsQ0FBQztJQUNQLE1BQU0sSUFBSSxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUM7SUFDakMsTUFBTSxFQUFFLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQztJQUVuQyxNQUFNLENBQUMsV0FBVyxJQUFJLEdBQUcsSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFLEVBQUUsQ0FBQztBQUNoRCxDQUFDO0FBRUQ7Ozs7R0FJRztBQUNIO0lBQ0UsTUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFFaEUsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDLHFCQUFxQixDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEVBQUU7UUFDaEUsT0FBTyxFQUFFLGdCQUFnQjtLQUMxQixDQUFDLENBQUM7QUFDTCxDQUFDO0FBTkQsZ0NBTUMiLCJmaWxlIjoiZGIvaW5pdC1zZXF1ZWxpemUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbmNvbnN0IGRiQ29uZmlnID0gcmVxdWlyZSgnLi8uLi9jb25maWcvZGF0YWJhc2UuanNvbicpO1xuaW1wb3J0ICogYXMgU2VxdWVsaXplIGZyb20gJ3NlcXVlbGl6ZSc7XG5cbi8qKlxuICogQnVpbGQgdGhlIG15c3FsIGNvbm5lY3Rpb24gc3RyaW5nIGZyb20gdGhlIGNvbmZpZyBkYXRhIGZvciB0aGUgY3VycmVudCBlbnZcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkQ29ubmVjdGlvblN0cmluZyhlbnY6IHN0cmluZyA9ICdkZXZlbG9wbWVudCcpIHtcbiAgY29uc3QgY29ubmVjdGlvbkRhdGEgPSBkYkNvbmZpZ1tlbnZdO1xuICBjb25zdCB1c2VyID0gY29ubmVjdGlvbkRhdGEudXNlcm5hbWU7XG4gIGNvbnN0IHBhc3MgPSBjb25uZWN0aW9uRGF0YS5wYXNzd29yZCA/XG4gICAgJzonICsgY29ubmVjdGlvbkRhdGEucGFzc3dvcmRcbiAgICA6ICcnO1xuICBjb25zdCBob3N0ID0gY29ubmVjdGlvbkRhdGEuaG9zdDtcbiAgY29uc3QgZGIgPSBjb25uZWN0aW9uRGF0YS5kYXRhYmFzZTtcblxuICByZXR1cm4gYG15c3FsOi8vJHt1c2VyfSR7cGFzc31AJHtob3N0fS8ke2RifWA7XG59XG5cbi8qKlxuICogSW50aWFsaXplcyB0aGUgU2VxdWVsaXplIGluc3RhbmNlXG4gKlxuICogQHJldHVybiB7U2VxdWVsaXplfVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0U2VxdWVsaXplKCk6IFNlcXVlbGl6ZS5TZXF1ZWxpemUge1xuICBjb25zdCBzaG91bGRMb2dRdWVyaWVzID0gZGJDb25maWdbcHJvY2Vzcy5lbnYuTk9ERV9FTlZdLmxvZ2dpbmc7XG5cbiAgcmV0dXJuIG5ldyBTZXF1ZWxpemUoYnVpbGRDb25uZWN0aW9uU3RyaW5nKHByb2Nlc3MuZW52Lk5PREVfRU5WKSwge1xuICAgIGxvZ2dpbmc6IHNob3VsZExvZ1F1ZXJpZXNcbiAgfSk7XG59XG4iXX0=
